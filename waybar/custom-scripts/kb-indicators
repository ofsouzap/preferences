#!/bin/bash

set -euo pipefail

case "${1:-}" in
  capslock)
    if grep -q '^1$' /sys/class/leds/input*::capslock/brightness 2>/dev/null; then
      echo '{"text":"CAPS","class":"indicator-on"}'
    else
      echo '{"text":"CAPS","class":"indicator-off"}'
    fi
    ;;
  numlock)
    if grep -q '^1$' /sys/class/leds/input*::numlock/brightness 2>/dev/null; then
      echo '{"text":"NUM","class":"indicator-on"}'
    else
      echo '{"text":"NUM","class":"indicator-off"}'
    fi
    ;;
  *)
    echo "Error: invalid argument. Expected 'capslock' or 'numlock'." >&2
    exit 1
    ;;
esac

